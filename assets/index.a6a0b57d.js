import{d as T,Q as V,o as m,c as B,w as u,G as v,H as y,u as e,P as $,f as A,R as D,a as s,S as p,T as _,U as E,V as C,L as Q,W as L,e as R,X as M,q as z,Y as J,m as x,v as h,z as N,t as O,F as P,D as W,Z as G,_ as H,C as X,$ as Y}from"./vendor.87962847.js";/* empty css             *//* empty css                    *//* empty css               *//* empty css              *//* empty css                *//* empty css              */import{h as b}from"./index.a12c56c8.js";import{M as Z,J as j,F as K}from"./index.99c0167c.js";/* empty css                          *//* empty css             */import{c as ee,a as te}from"./close.77dff18e.js";import{u as ne}from"./useToggle.27a48a26.js";import"./plugin-vue_export-helper.1c6f6f40.js";const ue="/paper",se="_examAside_1aqhx_2";var oe={examAside:se};const le=T({props:{index:null,current:null,studentAnswers:null,question:null},emits:["onClick"],setup(q,{emit:c}){const l=q,n=V(()=>{const{question:t,current:f}=l,{questionId:I,questionType:w}=f;return t.questionId===I&&t.questionType===w}),d=V(()=>{const{question:t,studentAnswers:f}=l;return!!f.find(w=>w.questionId===t.questionId&&w.questionType===t.questionType)}),o=()=>c("onClick",{questionId:l.question.questionId,questionType:l.question.questionType});return(t,f)=>(m(),B(e($),{style:{width:"32px",height:"32px"},type:e(n)||e(d)?"primary":"default",plain:!e(n)&&e(d),circle:"",onClick:o},{default:u(()=>[v(y(l.index),1)]),_:1},8,["type","plain"]))}});const ae=T({props:{question:null,studentAnswer:null},emits:["onSelected"],setup(q,{emit:c}){const l=q,n=A(l.studentAnswer||"");return D(()=>n.value,()=>c("onSelected",n.value)),(d,o)=>(m(),B(e(E),{column:1},{default:u(()=>[s(e(p),null,{default:u(()=>[v(y(l.question.question),1)]),_:1}),s(e(p),null,{default:u(()=>[s(e(_),{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value=t),label:"A",border:""},{default:u(()=>[v(y(l.question.answerA),1)]),_:1},8,["modelValue"])]),_:1}),s(e(p),null,{default:u(()=>[s(e(_),{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value=t),label:"B",border:""},{default:u(()=>[v(y(l.question.answerB),1)]),_:1},8,["modelValue"])]),_:1}),s(e(p),null,{default:u(()=>[s(e(_),{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=t=>n.value=t),label:"C",border:""},{default:u(()=>[v(y(l.question.answerC),1)]),_:1},8,["modelValue"])]),_:1}),s(e(p),null,{default:u(()=>[s(e(_),{modelValue:n.value,"onUpdate:modelValue":o[3]||(o[3]=t=>n.value=t),label:"D",border:""},{default:u(()=>[v(y(l.question.answerD),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),ie=T({props:{question:null,studentAnswer:null},emits:["onSelected"],setup(q,{emit:c}){const l=q,n=A(l.studentAnswer||"");return D(()=>n.value,()=>c("onSelected",n.value)),(d,o)=>(m(),B(e(E),{column:1},{default:u(()=>[s(e(p),null,{default:u(()=>[v(y(l.question.question),1)]),_:1}),s(e(p),null,{default:u(()=>[s(e(_),{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value=t),label:"T",border:""},{default:u(()=>[s(e(C),null,{default:u(()=>[s(e(ee))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(e(p),null,{default:u(()=>[s(e(_),{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value=t),label:"F",border:""},{default:u(()=>[s(e(C),null,{default:u(()=>[s(e(te))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),re=T({props:{question:null,studentAnswer:null},emits:["onSelected"],setup(q,{emit:c}){const l=q,n=A(l.studentAnswer||""),d=()=>{n.value.length!==0&&c("onSelected",n.value)};return(o,t)=>(m(),B(e(E),{column:1},{default:u(()=>[s(e(p),null,{default:u(()=>[v(y(l.question.question),1)]),_:1}),s(e(p),null,{default:u(()=>[s(e(Q),{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=f=>n.value=f),placeholder:"\u5728\u8FD9\u91CC\u8F93\u5165\u7B54\u6848",type:"textarea",autosize:{minRows:3},onBlur:d},null,8,["modelValue"])]),_:1})]),_:1}))}}),de={class:"h-full bg-gray-50"},Ve=T({setup(q){const c=L(),{onToggle:l}=ne(),n=A([]),d=A([]),o=A({}),t=R({questionId:0,questionType:1}),f=V(()=>n.value.find(i=>i.questionId===o.value.questionId&&i.questionType===t.questionType)),I=V(()=>t.questionType===1?ae:t.questionType===2?ie:re),w=()=>"\u79BB\u5F00\u9875\u9762\u5F53\u524D\u8FDB\u5EA6\u5C06\u4E0D\u4F1A\u4FDD\u5B58\uFF01",k=a=>{t.questionId=a.questionId,t.questionType=a.questionType};D(()=>[t.questionId,t.questionType],async()=>{try{const{questionType:a,questionId:i}=t,r=d.value.find(g=>g.questionType===a&&g.questionId===i),F=a===1?Z:a===2?j:K,{data:U}=await b.getRequest(`${F}/${r==null?void 0:r.questionId}`);o.value=U}catch{}});const S=a=>{const i=n.value.find(r=>r.questionId===o.value.questionId&&r.questionType===t.questionType);i?i.studentAnswer=a:n.value.push({studentAnswer:a,questionId:o.value.questionId,questionType:t.questionType})};return M(async()=>{await Y.confirm("\u79BB\u5F00\u9875\u9762\u5F53\u524D\u8FDB\u5EA6\u5C06\u4E0D\u4F1A\u4FDD\u5B58\uFF01","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"})}),z(async()=>{window.addEventListener("beforeunload",w);try{l();const{id:a}=c.params,{data:i}=await b.getRequest(`${ue}/${a}`);d.value=i,t.questionType=i[0].questionType}catch{}}),J(()=>window.removeEventListener("beforeunload",w)),(a,i)=>(m(),x("div",de,[s(e(h),{class:"h-full"},{default:u(()=>[s(e(N),{class:O([e(oe).examAside,"p-4 bg-white"])},{default:u(()=>[(m(!0),x(P,null,W(d.value,(r,F)=>(m(),x("span",{key:F},[s(le,{index:F+1,current:e(t),question:r,"student-answers":n.value,onOnClick:k},null,8,["index","current","question","student-answers"])]))),128))]),_:1},8,["class"]),s(e(h),null,{default:u(()=>[s(e(X),{class:"bg-white m-4"},{default:u(()=>{var r;return[o.value.questionId?(m(),B(G(e(I)),{key:+new Date,question:o.value,"student-answer":(r=e(f))==null?void 0:r.studentAnswer,onOnSelected:S},null,8,["question","student-answer"])):(m(),B(e(H),{key:1,description:"\u70B9\u51FB\u4FA7\u8FB9\u6309\u94AE\u7B54\u9898"}))]}),_:1})]),_:1})]),_:1})]))}});export{Ve as default};
